<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:jsf="http://xmlns.jcp.org/jsf">
<h:head>
	<title>Login</title>
	<link href="resources/css/inicio.css" rel="stylesheet" type="text/css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
</h:head>

<body>


<!-- 	<p:poll interval="60" update="formLogin" /> -->


	<div class="background">
		<div class="sysprod-text">SYSPROD</div>
	</div>

	<div class="login-wrapper">
		<h:form id="formLogin" class="login-card">

			<p:growl id="mensaje" showSummary="true" life="50000"
				showDetail="true" />
			<p class="subtitle">Bienvenido a SYSPROD</p>
			<h2>Iniciar sesión</h2>
			

			<div class="field">
				<label for="user">Usuario</label> <input type="text" name="uname"
					jsf:value="#{login.usuario.usuario}"
					placeholder="Ingresa tu usuario" required="true" label="username"
					jsf:requiredMessage="REQUIERE USUARIO" jsf:label="REQUIERE USUARIO" />
			</div>

			<div class="field">
				<label for="pass">Contraseña</label> <input type="password"
				name="psw" placeholder="Ingresa tu contraseña"
				jsf:value="#{login.usuario.password}" required="true"
				jsf:label="REQUIERE CONTRASEÑA" label="password"
				jsf:requiredMessage="REQUIERE PASSWORD" />
			</div>


			<p:commandButton id="inicio" class="btn-primary"
				update="formLogin:mensaje" value="INGRESAR AL SISTEMA"
				actionListener="#{login.login(event)}"
				oncomplete="handleLoginRequest(xhr, status, args)">
			</p:commandButton>
			<br/>
			<br/>
			<p class="subtitle">Release 2025.12.19</p>
		</h:form>
	</div>




	<script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.loggedIn) {
                    jQuery('#formLogin').jq.effect("shake", {times: 1}, 100);
                } else {
                    location.href = args.ruta;
                }
            }
        </script>

</body>

</html>